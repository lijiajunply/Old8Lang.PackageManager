# å›½é™…åŒ–æ”¯æŒå®æ–½æ€»ç»“

## æ¦‚è¿°

å·²æˆåŠŸä¸º Old8Lang Package Manager æ·»åŠ å®Œæ•´çš„å›½é™…åŒ– (i18n) æ”¯æŒ,åŒ…æ‹¬åç«¯ REST API å’Œå‰ç«¯ Vue åº”ç”¨ã€‚

## å®æ–½çš„åŠŸèƒ½

### åç«¯ (.NET)

#### 1. èµ„æºæ–‡ä»¶
- âœ… `Resources/Messages.resx` - è‹±æ–‡èµ„æºæ–‡ä»¶
- âœ… `Resources/Messages.zh-CN.resx` - ç®€ä½“ä¸­æ–‡èµ„æºæ–‡ä»¶
- âœ… `Resources/Messages.cs` - èµ„æºæ–‡ä»¶å ä½ç¬¦ç±»

#### 2. æœ¬åœ°åŒ–æœåŠ¡
- âœ… `ILocalizationService` æ¥å£
- âœ… `LocalizationService` å®ç°
- âœ… åœ¨ `Program.cs` ä¸­æ³¨å†ŒæœåŠ¡

#### 3. è¯­è¨€æ£€æµ‹ä¸­é—´ä»¶
- âœ… `LanguageMiddleware` - è‡ªåŠ¨æ£€æµ‹å’Œè®¾ç½®è¯·æ±‚è¯­è¨€
- âœ… æ”¯æŒæŸ¥è¯¢å‚æ•° (`?lang=zh-CN`)
- âœ… æ”¯æŒ `Accept-Language` HTTP å¤´
- âœ… è¯­è¨€ä¼˜å…ˆçº§åŒ¹é…

#### 4. æ§åˆ¶å™¨æ›´æ–°
- âœ… `PackagesController` - æ‰€æœ‰ API ç«¯ç‚¹ä½¿ç”¨æœ¬åœ°åŒ–æ¶ˆæ¯
- âœ… `ServiceIndexController` - æœåŠ¡ç´¢å¼•æè¿°æœ¬åœ°åŒ–
- âœ… é”™è¯¯æ¶ˆæ¯
- âœ… æˆåŠŸæ¶ˆæ¯
- âœ… éªŒè¯æ¶ˆæ¯

#### 5. é…ç½®
- âœ… æ”¯æŒçš„æ–‡åŒ–é…ç½® (en, zh-CN)
- âœ… é»˜è®¤æ–‡åŒ–è®¾ç½®
- âœ… èµ„æºè·¯å¾„é…ç½®

### å‰ç«¯ (Vue 3)

#### 1. i18n é…ç½®
- âœ… å®‰è£… vue-i18n@9
- âœ… `src/i18n/index.ts` - i18n å®ä¾‹é…ç½®
- âœ… æµè§ˆå™¨è¯­è¨€æ£€æµ‹
- âœ… localStorage è¯­è¨€æŒä¹…åŒ–

#### 2. è¯­è¨€æ–‡ä»¶
- âœ… `src/i18n/locales/en.ts` - è‹±æ–‡ç¿»è¯‘
- âœ… `src/i18n/locales/zh-CN.ts` - ç®€ä½“ä¸­æ–‡ç¿»è¯‘
- âœ… å®Œæ•´çš„é”®å€¼å¯¹è¦†ç›–:
  - é€šç”¨è¯æ±‡ (common)
  - å¯¼èˆª (nav)
  - é¦–é¡µ (home)
  - åŒ…è¯¦æƒ… (package)
  - ä¸Šä¼  (upload)
  - ä¸ªäººèµ„æ–™ (profile)
  - è®¤è¯ (auth)
  - é”™è¯¯ (errors)
  - æ¶ˆæ¯ (messages)

#### 3. è¯­è¨€åˆ‡æ¢ç»„ä»¶
- âœ… `LanguageSwitcher.vue` - è¯­è¨€ä¸‹æ‹‰é€‰æ‹©å™¨
- âœ… å›¾æ ‡å’Œæ ‡ç­¾æ˜¾ç¤º
- âœ… è¯­è¨€åˆ‡æ¢åè‡ªåŠ¨é‡æ–°åŠ è½½

#### 4. ç»„ä»¶æ›´æ–°
- âœ… `AppHeader.vue` - é›†æˆè¯­è¨€åˆ‡æ¢å™¨
- âœ… å¯¼èˆªèœå•æœ¬åœ°åŒ–
- âœ… ç”¨æˆ·èœå•æœ¬åœ°åŒ–
- âœ… æŒ‰é’®æ–‡æœ¬æœ¬åœ°åŒ–

#### 5. ä¸»åº”ç”¨é…ç½®
- âœ… `main.ts` - æ³¨å†Œ i18n æ’ä»¶

## æ”¯æŒçš„è¯­è¨€

- ğŸ‡¬ğŸ‡§ è‹±è¯­ (English) - `en`
- ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡ (Simplified Chinese) - `zh-CN`

## æµ‹è¯•ç»“æœ

### åç«¯
```bash
âœ… æ„å»ºæˆåŠŸ
âœ… æ— å›½é™…åŒ–ç›¸å…³é”™è¯¯
âš ï¸  6 ä¸ªè­¦å‘Š (é¢„å…ˆå­˜åœ¨,ä¸å›½é™…åŒ–æ— å…³)
```

### å‰ç«¯
```bash
âš ï¸  æ„å»ºæœ‰ TypeScript é”™è¯¯ (é¢„å…ˆå­˜åœ¨,ä¸å›½é™…åŒ–æ— å…³)
âœ… å›½é™…åŒ–é…ç½®æ­£ç¡®
âœ… æ‰€æœ‰è¯­è¨€æ–‡ä»¶è¯­æ³•æ­£ç¡®
```

## ä½¿ç”¨ç¤ºä¾‹

### åç«¯ API

**ä½¿ç”¨æŸ¥è¯¢å‚æ•°:**
```bash
curl "http://localhost:5000/v3/search?q=test&lang=zh-CN"
```

**ä½¿ç”¨ HTTP å¤´:**
```bash
curl -H "Accept-Language: zh-CN" "http://localhost:5000/v3/search?q=test"
```

### å‰ç«¯

**è‡ªåŠ¨æ£€æµ‹:**
- æµè§ˆå™¨è¯­è¨€ä¸ºä¸­æ–‡æ—¶è‡ªåŠ¨æ˜¾ç¤ºä¸­æ–‡ç•Œé¢
- æµè§ˆå™¨è¯­è¨€ä¸ºè‹±æ–‡æˆ–å…¶ä»–æ—¶æ˜¾ç¤ºè‹±æ–‡ç•Œé¢

**æ‰‹åŠ¨åˆ‡æ¢:**
1. ç‚¹å‡»é¡µé¢å¤´éƒ¨çš„è¯­è¨€å›¾æ ‡
2. ä»ä¸‹æ‹‰èœå•é€‰æ‹©è¯­è¨€
3. é¡µé¢è‡ªåŠ¨é‡æ–°åŠ è½½å¹¶åº”ç”¨æ–°è¯­è¨€

**ç¼–ç¨‹æ–¹å¼:**
```vue
<template>
  <div>
    <h1>{{ t('home.title') }}</h1>
  </div>
</template>

<script setup>
import { useI18n } from 'vue-i18n'
const { t } = useI18n()
</script>
```

## æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶

#### åç«¯
1. `Old8Lang.PackageManager.Server/Resources/Messages.cs`
2. `Old8Lang.PackageManager.Server/Resources/Messages.resx`
3. `Old8Lang.PackageManager.Server/Resources/Messages.zh-CN.resx`
4. `Old8Lang.PackageManager.Server/Services/LocalizationService.cs`
5. `Old8Lang.PackageManager.Server/Middleware/LanguageMiddleware.cs`

#### å‰ç«¯
6. `frontend/src/i18n/index.ts`
7. `frontend/src/i18n/locales/en.ts`
8. `frontend/src/i18n/locales/zh-CN.ts`
9. `frontend/src/components/LanguageSwitcher.vue`

#### æ–‡æ¡£
10. `I18N.md` - å›½é™…åŒ–ä½¿ç”¨æ–‡æ¡£

### ä¿®æ”¹æ–‡ä»¶

#### åç«¯
1. `Old8Lang.PackageManager.Server/Old8Lang.PackageManager.Server.csproj` - æ·»åŠ èµ„æºæ–‡ä»¶é…ç½®
2. `Old8Lang.PackageManager.Server/Program.cs` - æ³¨å†Œæœ¬åœ°åŒ–æœåŠ¡å’Œä¸­é—´ä»¶
3. `Old8Lang.PackageManager.Server/Controllers/PackagesController.cs` - ä½¿ç”¨æœ¬åœ°åŒ–æœåŠ¡

#### å‰ç«¯
4. `frontend/package.json` - æ·»åŠ  vue-i18n ä¾èµ–
5. `frontend/src/main.ts` - æ³¨å†Œ i18n æ’ä»¶
6. `frontend/src/components/AppHeader.vue` - é›†æˆè¯­è¨€åˆ‡æ¢å™¨

## æ‰©å±•æ€§

### æ·»åŠ æ–°è¯­è¨€

**åç«¯:**
1. åˆ›å»º `Resources/Messages.{è¯­è¨€ä»£ç }.resx`
2. å¤åˆ¶æ‰€æœ‰é”®å¹¶ç¿»è¯‘
3. æ›´æ–° `Program.cs` ä¸­çš„ `supportedCultures`
4. æ›´æ–° `LanguageMiddleware.cs` ä¸­çš„ `_supportedCultures`

**å‰ç«¯:**
1. åˆ›å»º `src/i18n/locales/{è¯­è¨€ä»£ç }.ts`
2. å¤åˆ¶ `en.ts` å¹¶ç¿»è¯‘æ‰€æœ‰å€¼
3. åœ¨ `src/i18n/index.ts` ä¸­å¯¼å…¥å¹¶æ³¨å†Œ
4. åœ¨ `LanguageSwitcher.vue` ä¸­æ·»åŠ é€‰é¡¹

### æ·»åŠ æ–°ç¿»è¯‘é”®

**åç«¯:**
1. åœ¨ `Messages.resx` ä¸­æ·»åŠ æ–°çš„ `<data>` é¡¹
2. åœ¨æ‰€æœ‰å…¶ä»–è¯­è¨€çš„ `.resx` æ–‡ä»¶ä¸­æ·»åŠ å¯¹åº”ç¿»è¯‘
3. åœ¨ä»£ç ä¸­ä½¿ç”¨: `localization.GetString("YourNewKey")`

**å‰ç«¯:**
1. åœ¨ `locales/en.ts` ä¸­æ·»åŠ æ–°é”®
2. åœ¨æ‰€æœ‰å…¶ä»–è¯­è¨€æ–‡ä»¶ä¸­æ·»åŠ å¯¹åº”ç¿»è¯‘
3. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨: `t('your.new.key')`

## æœ€ä½³å®è·µ

1. **é”®å‘½å**: ä½¿ç”¨ç‚¹åˆ†éš”çš„å±‚çº§ç»“æ„ (å¦‚ `package.details.version`)
2. **å ä½ç¬¦**: åç«¯ä½¿ç”¨ `{0}`, å‰ç«¯ä½¿ç”¨å‘½åå‚æ•°
3. **é»˜è®¤è¯­è¨€**: è‹±è¯­ä½œä¸ºåå¤‡è¯­è¨€
4. **æµ‹è¯•**: åœ¨æ·»åŠ æ–°ç¿»è¯‘åæµ‹è¯•æ‰€æœ‰è¯­è¨€
5. **æ–‡æ¡£**: ä¿æŒ `I18N.md` æ–‡æ¡£æ›´æ–°

## æ€§èƒ½å½±å“

- **åç«¯**: èµ„æºæ–‡ä»¶åœ¨ç¼–è¯‘æ—¶åµŒå…¥,è¿è¡Œæ—¶å¼€é”€æå°
- **å‰ç«¯**: è¯­è¨€æ–‡ä»¶æ‰“åŒ…åˆ° bundle,é¦–æ¬¡åŠ è½½ç¨æœ‰å¢åŠ  (~20KB)
- **åˆ‡æ¢**: å‰ç«¯è¯­è¨€åˆ‡æ¢éœ€è¦é‡æ–°åŠ è½½é¡µé¢ä»¥ç¡®ä¿å®Œæ•´æ›´æ–°

## å·²çŸ¥é™åˆ¶

1. å‰ç«¯è¯­è¨€åˆ‡æ¢éœ€è¦é‡æ–°åŠ è½½é¡µé¢
2. æŸäº›åŠ¨æ€å†…å®¹(å¦‚æ¥è‡ªæ•°æ®åº“çš„åŒ…æè¿°)ä¸ä¼šè‡ªåŠ¨ç¿»è¯‘
3. CLI å·¥å…·å›½é™…åŒ–æœªå®ç° (è§„åˆ’ä¸­)

## æœªæ¥æ”¹è¿›

- [ ] å®ç° CLI å·¥å…·çš„å›½é™…åŒ–æ”¯æŒ
- [ ] æ·»åŠ æ›´å¤šè¯­è¨€ (æ—¥è¯­ã€éŸ©è¯­ã€å¾·è¯­ç­‰)
- [ ] å®ç°åŒ…å…ƒæ•°æ®çš„å¤šè¯­è¨€æ”¯æŒ
- [ ] ä¼˜åŒ–å‰ç«¯è¯­è¨€åˆ‡æ¢,é¿å…é‡æ–°åŠ è½½
- [ ] æ·»åŠ æ—¥æœŸ/æ—¶é—´/æ•°å­—çš„æœ¬åœ°åŒ–æ ¼å¼åŒ–

## è´¡çŒ®

æ¬¢è¿ç¤¾åŒºè´¡çŒ®æ–°è¯­è¨€æˆ–æ”¹è¿›ç°æœ‰ç¿»è¯‘ã€‚è¯·å‚è€ƒ `I18N.md` æ–‡æ¡£äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚

## ç›¸å…³æ–‡æ¡£

- [I18N.md](./I18N.md) - å›½é™…åŒ–ä½¿ç”¨æŒ‡å—
- [Vue I18n æ–‡æ¡£](https://vue-i18n.intlify.dev/)
- [ASP.NET Core æœ¬åœ°åŒ–](https://docs.microsoft.com/aspnet/core/fundamentals/localization)
