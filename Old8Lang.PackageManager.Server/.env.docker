# ==============================================================================
# Docker Environment Configuration for Old8Lang Package Manager
# ==============================================================================
# This file is for Docker/Docker Compose deployments
# Copy this to .env in your Docker deployment and customize as needed

# ==============================================================================
# Database Configuration
# ==============================================================================

DatabaseProvider=PostgreSQL

# PostgreSQL (recommended for production)
ConnectionStrings__PostgresConnection=Host=postgres;Port=5432;Database=Old8LangPackageManager;Username=postgres;Password=${POSTGRES_PASSWORD:-Old8Lang123!}

# Redis
ConnectionStrings__Redis=redis:6379

# ==============================================================================
# Server Configuration
# ==============================================================================

# For Docker, use 0.0.0.0 to listen on all interfaces
Kestrel__Endpoints__Http__Url=http://0.0.0.0:5000
Kestrel__Endpoints__Https__Url=https://0.0.0.0:5001

AllowedHosts=*

# ==============================================================================
# Package Storage Configuration
# ==============================================================================

# Use volume mount path for Docker
PackageStorage__StoragePath=/app/data/packages
PackageStorage__MaxPackageSize=104857600
PackageStorage__EnableCompression=true

# ==============================================================================
# Storage Provider Configuration
# ==============================================================================

# Options: FileSystem, S3, Minio, AzureBlob
Storage__ProviderType=FileSystem
Storage__FileSystem__RootPath=/app/data/packages

# For MinIO in Docker Compose
# Storage__ProviderType=Minio
# Storage__Minio__Endpoint=minio:9000
# Storage__Minio__BucketName=old8lang-packages
# Storage__Minio__AccessKey=${MINIO_ACCESS_KEY}
# Storage__Minio__SecretKey=${MINIO_SECRET_KEY}
# Storage__Minio__UseSSL=false

# ==============================================================================
# API Configuration
# ==============================================================================

Api__Version=3.0.0
Api__ServiceName=Old8Lang Package Manager
Api__BaseUrl=${API_BASE_URL:-https://localhost:5001}
Api__RequireApiKey=false
Api__RequireAuthentication=true
Api__RateLimitPerMinute=100

# ==============================================================================
# Security Configuration
# ==============================================================================

Security__EnablePackageSigning=false
Security__RequireTrustedCertificates=false
Security__ValidateCertificateChain=false
Security__EnableChecksumValidation=true

# JWT Configuration - MUST CHANGE IN PRODUCTION
Security__Jwt__Issuer=Old8LangPackageManager
Security__Jwt__Audience=Old8LangPackageManager
Security__Jwt__SecretKey=${JWT_SECRET_KEY:-CHANGE_THIS_SECRET_KEY_FOR_PRODUCTION}
Security__Jwt__ExpirationMinutes=1440
Security__Jwt__RefreshExpirationDays=30

# ==============================================================================
# Authentication Configuration
# ==============================================================================

Authentication__EnableRegistration=true
Authentication__RequireEmailVerification=false
Authentication__AllowGuestUpload=false
Authentication__MaxPackagesPerUser=100
Authentication__MaxPackageSizePerUser=1073741824

# ==============================================================================
# OIDC Configuration (Optional)
# ==============================================================================

Authentication__OIDC__Enabled=${OIDC_ENABLED:-false}

# GitHub OAuth
Authentication__OIDC__Providers__GitHub__Enabled=${GITHUB_OAUTH_ENABLED:-false}
Authentication__OIDC__Providers__GitHub__ClientId=${GITHUB_CLIENT_ID}
Authentication__OIDC__Providers__GitHub__ClientSecret=${GITHUB_CLIENT_SECRET}

# Google OAuth
Authentication__OIDC__Providers__Google__Enabled=${GOOGLE_OAUTH_ENABLED:-false}
Authentication__OIDC__Providers__Google__ClientId=${GOOGLE_CLIENT_ID}
Authentication__OIDC__Providers__Google__ClientSecret=${GOOGLE_CLIENT_SECRET}

# ==============================================================================
# Redis Configuration
# ==============================================================================

Redis__Enabled=true
Redis__ConnectionString=redis:6379
Redis__Database=0
Redis__KeyPrefix=o8pm:
Redis__DefaultExpiration=01:00:00

# ==============================================================================
# Logging Configuration
# ==============================================================================

Logging__LogLevel__Default=${LOG_LEVEL:-Information}
Logging__LogLevel__Microsoft.AspNetCore=Warning
Logging__LogLevel__Microsoft.EntityFrameworkCore.Database.Command=Information

# ==============================================================================
# Application Environment
# ==============================================================================

ASPNETCORE_ENVIRONMENT=${ASPNETCORE_ENVIRONMENT:-Production}
ASPNETCORE_URLS=http://+:5000

# ==============================================================================
# PostgreSQL Database Configuration (for Docker Compose)
# ==============================================================================

POSTGRES_DB=Old8LangPackageManager
POSTGRES_USER=postgres
POSTGRES_PASSWORD=Old8Lang123!

# ==============================================================================
# MinIO Configuration (Optional, for Docker Compose)
# ==============================================================================

MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
